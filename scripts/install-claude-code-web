#!/bin/bash

# Installation script for Claude Code Web development environment
# Installs the complete Spritely stack:
# Step 1: Guile Scheme (interpreter)
# Step 2: Spritely Goblins (distributed object programming)
# Step 3: Spritely Hoot (Scheme to WebAssembly compiler)
#
# Supports:
# - Linux: Guix, apt, dnf, yum, pacman, zypper, or source
# - macOS: Homebrew, Guix, or source
#
# The script is idempotent and safe to run multiple times.

set -e

echo "ğŸ”§ Claude Code Web Development Environment Installer"
echo "===================================================="
echo ""

# Function to check if command exists
command_exists() {
    command -v "$1" >/dev/null 2>&1
}

# Function to run command with sudo only if not root
run_as_root() {
    if [ "$EUID" -eq 0 ]; then
        "$@"
    else
        sudo "$@"
    fi
}

# Function to detect OS
detect_os() {
    if [[ "$OSTYPE" == "linux-gnu"* ]]; then
        echo "linux"
    elif [[ "$OSTYPE" == "darwin"* ]]; then
        echo "macos"
    else
        echo "unknown"
    fi
}

# Function to detect Linux package manager
detect_package_manager() {
    if command_exists apt-get; then
        echo "apt"
    elif command_exists dnf; then
        echo "dnf"
    elif command_exists yum; then
        echo "yum"
    elif command_exists pacman; then
        echo "pacman"
    elif command_exists zypper; then
        echo "zypper"
    else
        echo "unknown"
    fi
}

# Function to check Guile version
check_guile_version() {
    if ! command_exists guile; then
        return 1
    fi

    local version=$(guile --version | head -n 1 | grep -oP '\d+\.\d+(\.\d+)?' | head -n 1)
    local major=$(echo "$version" | cut -d. -f1)
    local minor=$(echo "$version" | cut -d. -f2)
    local patch=$(echo "$version" | cut -d. -f3)
    [ -z "$patch" ] && patch=0

    # Check if version is 3.0 or higher
    # Note: For Hoot compatibility, we need Guile from main branch (3.0.11+ or development version)
    if [ "$major" -ge 3 ]; then
        echo "$version"
        return 0
    else
        echo "$version"
        return 1
    fi
}

# Function to check if Guile version is sufficient for Hoot
check_hoot_compatible_guile() {
    if ! command_exists guile; then
        return 1
    fi

    local version=$(guile --version | head -n 1 | grep -oP '\d+\.\d+(\.\d+)?' | head -n 1)
    local major=$(echo "$version" | cut -d. -f1)
    local minor=$(echo "$version" | cut -d. -f2)
    local patch=$(echo "$version" | cut -d. -f3)
    [ -z "$patch" ] && patch=0

    # Hoot requires Guile 3.0.11+ or development version
    # Guile 3.0.9 and 3.0.10 are NOT sufficient (missing primcall-raw-representations)
    if [ "$major" -eq 3 ] && [ "$minor" -eq 0 ]; then
        if [ "$patch" -ge 11 ]; then
            return 0  # 3.0.11+ is good
        else
            return 1  # 3.0.0-3.0.10 are not sufficient
        fi
    elif [ "$major" -gt 3 ]; then
        return 0  # Any version > 3.x should be fine
    else
        return 1  # < 3.0 is not sufficient
    fi
}

# Function to install Guile from source (main development branch for Hoot compatibility)
install_guile_from_source() {
    echo "  Installing Guile from Git main branch (required for Hoot)..."
    echo "  Note: This provides the latest development version with all features needed by Hoot"
    echo ""

    # Check for required build tools
    local missing_tools=""
    for tool in git autoconf automake libtool pkg-config make gcc g++; do
        if ! command_exists "$tool"; then
            missing_tools="$missing_tools $tool"
        fi
    done

    if [ -n "$missing_tools" ]; then
        echo "  âš ï¸  Missing build tools:$missing_tools"
        echo "  Please install these tools and run again"
        return 1
    fi

    # Clone the Guile repository
    local tmp_dir="/tmp/guile-install-$$"
    echo "  Cloning Guile repository from git.savannah.gnu.org..."
    git clone https://git.savannah.gnu.org/git/guile.git "$tmp_dir" --depth=1

    cd "$tmp_dir"

    echo "  Building Guile from source (this may take 10-30 minutes)..."
    ./autogen.sh
    ./configure --prefix=/usr/local
    make -j$(nproc 2>/dev/null || sysctl -n hw.ncpu 2>/dev/null || echo 2)

    echo "  Installing Guile (requires sudo)..."
    run_as_root make install

    # Clean up
    cd /
    rm -rf "$tmp_dir"

    # Update library cache on Linux
    if [[ "$(detect_os)" == "linux" ]]; then
        run_as_root ldconfig 2>/dev/null || true
    fi

    echo "  âœ“ Guile installed from source (main branch)"
}

# Function to install Guile via Guix (recommended for Hoot)
install_guile_guix() {
    echo "  Using Guix to install Guile development version..."

    if ! command_exists guix; then
        echo "  âš ï¸  Guix not found"
        return 1
    fi

    # Try to install guile-next (development version) first, fall back to guile
    if guix install guile-next 2>/dev/null; then
        echo "  âœ“ Guile development version installed via Guix (guile-next)"
        return 0
    else
        echo "  guile-next not available, trying regular guile package..."
        guix install guile
        echo "  âœ“ Guile installed via Guix"
        return 0
    fi
}

# Function to install Guile on Linux
install_guile_linux() {
    local pkg_manager=$1

    echo "  Detected package manager: $pkg_manager"
    echo "  "
    echo "  âš ï¸  IMPORTANT: Hoot requires Guile from the main development branch"
    echo "  Package manager versions (3.0.x stable) may not have all required features"
    echo "  Recommended: Install via Guix or build from source"
    echo "  "

    # First try Guix (recommended)
    if command_exists guix; then
        echo "  Guix detected - using Guix for optimal Hoot compatibility..."
        if install_guile_guix; then
            return 0
        fi
    fi

    # Ask user if they want to build from source or use package manager
    echo "  Choose installation method:"
    echo "  1) Build from Git source (recommended for Hoot, may take 10-30 min)"
    echo "  2) Use package manager (faster, but may not work with Hoot)"
    echo "  "
    read -p "Enter choice [1/2] (default: 1): " choice
    choice=${choice:-1}

    if [ "$choice" = "1" ]; then
        install_guile_from_source
        return $?
    fi

    # Fall back to package manager
    echo "  Installing Guile via package manager..."
    echo "  âš ï¸  Warning: This may not include features required by Hoot"

    case "$pkg_manager" in
        apt)
            run_as_root apt-get update
            run_as_root apt-get install -y guile-3.0 guile-3.0-dev
            ;;
        dnf)
            run_as_root dnf install -y guile30 guile30-devel
            ;;
        yum)
            run_as_root yum install -y guile30 guile30-devel
            ;;
        pacman)
            run_as_root pacman -S --noconfirm guile
            ;;
        zypper)
            run_as_root zypper install -y guile guile-devel
            ;;
        *)
            echo "âŒ Error: Unsupported package manager '$pkg_manager'"
            echo "   Falling back to source installation..."
            install_guile_from_source
            return $?
            ;;
    esac
}

# Function to install Guile on macOS
install_guile_macos() {
    echo "  Checking for Homebrew..."

    if ! command_exists brew; then
        echo "âŒ Error: Homebrew is not installed"
        echo "   Please install Homebrew from https://brew.sh/"
        echo "   Or install Guix and run this script again"
        return 1
    fi

    echo "  âœ“ Homebrew found"
    echo "  "
    echo "  âš ï¸  IMPORTANT: Hoot requires Guile from the main development branch"
    echo "  Installing Guile --HEAD (development version)..."
    echo "  "

    # First try Guix if available (preferred)
    if command_exists guix; then
        echo "  Guix detected - using Guix for optimal Hoot compatibility..."
        if install_guile_guix; then
            return 0
        fi
    fi

    # Install Guile HEAD version via Homebrew
    brew install guile --HEAD

    echo "  âœ“ Guile HEAD (development version) installed via Homebrew"
}

# Function to check if guile-fibers is installed
check_fibers_installed() {
    # Try to use guile to check if fibers module is available
    if command_exists guile; then
        guile -c "(use-modules (fibers))" 2>/dev/null && return 0
    fi
    return 1
}

# Function to install guile-fibers via Guix
install_fibers_guix() {
    echo "  Using Guix to install guile-fibers..."

    if ! command_exists guix; then
        echo "  âš ï¸  Guix not found, will use source installation"
        return 1
    fi

    guix install guile-fibers

    # Verify installation
    if check_fibers_installed; then
        echo "  âœ“ guile-fibers installed via Guix"
        return 0
    else
        echo "  âš ï¸  Guix installation completed but module not found, trying source install"
        return 1
    fi
}

# Function to install guile-fibers from source
install_fibers_source() {
    echo "  Installing guile-fibers from source..."

    # Check for required build tools
    local missing_tools=""
    for tool in git autoconf automake pkg-config make; do
        if ! command_exists "$tool"; then
            missing_tools="$missing_tools $tool"
        fi
    done

    if [ -n "$missing_tools" ]; then
        echo "  âš ï¸  Missing build tools:$missing_tools"
        echo "  Please install these tools and run again"
        return 1
    fi

    # Clone the repository
    local tmp_dir="/tmp/fibers-install-$$"
    echo "  Cloning guile-fibers repository..."
    git clone https://github.com/wingo/fibers "$tmp_dir"

    cd "$tmp_dir"

    echo "  Building guile-fibers..."
    ./autogen.sh
    ./configure
    make

    echo "  Installing guile-fibers (requires sudo)..."
    run_as_root make install

    # Clean up
    cd /
    rm -rf "$tmp_dir"

    # Update library cache on Linux
    if [[ "$(detect_os)" == "linux" ]]; then
        run_as_root ldconfig 2>/dev/null || true
    fi

    echo "  âœ“ guile-fibers installed from source"
}

# Function to install guile-fibers
install_fibers() {
    echo ""
    echo "Step 1.5: Installing guile-fibers (required by Goblins)"
    echo "-------------------------------------------------------"
    echo ""

    # Check if fibers is already installed
    if check_fibers_installed; then
        echo "âœ“ guile-fibers already installed"
        echo ""
        guile -c "(use-modules (fibers)) (display \"Fibers module loaded successfully\n\")"
        return 0
    fi

    echo "guile-fibers not found. Installing..."
    echo ""

    # Try Guix first, then fall back to source
    if install_fibers_guix || install_fibers_source; then
        # Verify installation
        if check_fibers_installed; then
            echo ""
            echo "âœ“ guile-fibers successfully installed"
            guile -c "(use-modules (fibers)) (display \"Fibers module loaded successfully\n\")"
            return 0
        else
            echo ""
            echo "âŒ Error: guile-fibers installation completed but module cannot be loaded"
            echo "   Please check the installation logs above for errors"
            return 1
        fi
    else
        echo ""
        echo "âŒ Error: All installation methods failed"
        echo "   Please install guile-fibers manually from https://github.com/wingo/fibers"
        return 1
    fi
}

# Function to check if Goblins is installed
check_goblins_installed() {
    # Try to use guile to check if goblins module is available
    if command_exists guile; then
        guile -c "(use-modules (goblins))" 2>/dev/null && return 0
    fi
    return 1
}

# Function to install Goblins via Guix
install_goblins_guix() {
    echo "  Using Guix to install Goblins..."

    if ! command_exists guix; then
        echo "  âš ï¸  Guix not found, will use source installation"
        return 1
    fi

    guix install guile-goblins

    # Verify installation
    if check_goblins_installed; then
        echo "  âœ“ Goblins installed via Guix"
        return 0
    else
        echo "  âš ï¸  Guix installation completed but module not found, trying source install"
        return 1
    fi
}

# Function to install Goblins from source
install_goblins_source() {
    echo "  Installing Goblins from source..."

    # Check for required build tools
    local missing_tools=""
    for tool in git autoconf automake pkg-config make; do
        if ! command_exists "$tool"; then
            missing_tools="$missing_tools $tool"
        fi
    done

    if [ -n "$missing_tools" ]; then
        echo "  âš ï¸  Missing build tools:$missing_tools"
        echo "  Please install these tools and run again"
        return 1
    fi

    # Clone the repository
    local tmp_dir="/tmp/goblins-install-$$"
    echo "  Cloning Goblins repository..."
    git clone https://codeberg.org/spritely/goblins "$tmp_dir"

    cd "$tmp_dir"

    echo "  Building Goblins..."
    ./bootstrap.sh
    ./configure
    make

    echo "  Installing Goblins (requires sudo)..."
    run_as_root make install

    # Clean up
    cd /
    rm -rf "$tmp_dir"

    # Update library cache on Linux
    if [[ "$(detect_os)" == "linux" ]]; then
        run_as_root ldconfig 2>/dev/null || true
    fi

    echo "  âœ“ Goblins installed from source"
}

# Function to install Goblins
install_goblins() {
    echo ""
    echo "Step 2: Installing Spritely Goblins"
    echo "------------------------------------"
    echo ""

    # Check if Goblins is already installed
    if check_goblins_installed; then
        echo "âœ“ Spritely Goblins already installed"
        echo ""
        guile -c "(use-modules (goblins)) (display \"Goblins module loaded successfully\n\")"
        return 0
    fi

    echo "Spritely Goblins not found. Installing..."
    echo ""

    # Try Guix first, then fall back to source
    if install_goblins_guix || install_goblins_source; then
        # Verify installation
        if check_goblins_installed; then
            echo ""
            echo "âœ“ Spritely Goblins successfully installed"
            guile -c "(use-modules (goblins)) (display \"Goblins module loaded successfully\n\")"
            return 0
        else
            echo ""
            echo "âŒ Error: Goblins installation completed but module cannot be loaded"
            echo "   Please check the installation logs above for errors"
            return 1
        fi
    else
        echo ""
        echo "âŒ Error: All installation methods failed"
        echo "   Please install Goblins manually from https://codeberg.org/spritely/goblins"
        return 1
    fi
}

# Function to check if Hoot is installed
check_hoot_installed() {
    # Check if guild command exists and has compile-wasm subcommand
    if command_exists guild; then
        guild compile-wasm --version >/dev/null 2>&1 && return 0
    fi
    return 1
}

# Function to install Hoot via Guix
install_hoot_guix() {
    echo "  Using Guix to install Hoot..."

    if ! command_exists guix; then
        echo "  âš ï¸  Guix not found, will use source installation"
        return 1
    fi

    guix install guile-hoot

    # Verify installation
    if check_hoot_installed; then
        echo "  âœ“ Hoot installed via Guix"
        return 0
    else
        echo "  âš ï¸  Guix installation completed but guild compile-wasm not found, trying source install"
        return 1
    fi
}

# Function to install Hoot via Homebrew (macOS)
install_hoot_homebrew() {
    echo "  Using Homebrew to install Hoot..."

    if ! command_exists brew; then
        echo "  âš ï¸  Homebrew not found, will use source installation"
        return 1
    fi

    # Add the Guile tap if not already added
    brew tap aconchillo/guile 2>/dev/null || true
    brew install guile-hoot

    # Verify installation
    if check_hoot_installed; then
        echo "  âœ“ Hoot installed via Homebrew"
        return 0
    else
        echo "  âš ï¸  Homebrew installation completed but guild compile-wasm not found"
        return 1
    fi
}

# Function to install Hoot from source
install_hoot_source() {
    echo "  Installing Hoot from source..."

    # Check for required build tools
    local missing_tools=""
    for tool in git autoconf automake pkg-config make; do
        if ! command_exists "$tool"; then
            missing_tools="$missing_tools $tool"
        fi
    done

    if [ -n "$missing_tools" ]; then
        echo "  âš ï¸  Missing build tools:$missing_tools"
        echo "  Please install these tools and run again"
        return 1
    fi

    # Clone the repository
    local tmp_dir="/tmp/hoot-install-$$"
    echo "  Cloning Hoot repository from Codeberg..."
    git clone https://codeberg.org/spritely/hoot "$tmp_dir"

    cd "$tmp_dir"

    echo "  Building Hoot..."
    ./bootstrap.sh 2>/dev/null || autoreconf -vif
    ./configure --prefix=/usr/local
    make

    echo "  Running tests (may take a while)..."
    make check || echo "  âš ï¸  Some tests failed, but continuing installation..."

    echo "  Installing Hoot (requires sudo)..."
    run_as_root make install

    # Clean up
    cd /
    rm -rf "$tmp_dir"

    # Update library cache on Linux
    if [[ "$(detect_os)" == "linux" ]]; then
        run_as_root ldconfig 2>/dev/null || true
    fi

    echo "  âœ“ Hoot installed from source"
}

# Function to install Hoot
install_hoot() {
    echo ""
    echo "Step 3: Installing Spritely Hoot"
    echo "---------------------------------"
    echo ""

    # Check if Hoot is already installed
    if check_hoot_installed; then
        echo "âœ“ Spritely Hoot already installed"
        echo ""
        guild compile-wasm --version 2>&1 | head -n 1 || echo "guild compile-wasm is available"
        return 0
    fi

    echo "Spritely Hoot not found. Installing..."
    echo ""

    # Try installation methods based on OS
    os=$(detect_os)
    local installed=false

    case "$os" in
        linux)
            # Try Guix first, then fall back to source
            if install_hoot_guix || install_hoot_source; then
                installed=true
            fi
            ;;

        macos)
            # Try Homebrew first, then Guix, then source
            if install_hoot_homebrew || install_hoot_guix || install_hoot_source; then
                installed=true
            fi
            ;;

        *)
            echo "  Unsupported OS, trying Guix and source installation..."
            if install_hoot_guix || install_hoot_source; then
                installed=true
            fi
            ;;
    esac

    if [ "$installed" = true ]; then
        # Verify installation
        if check_hoot_installed; then
            echo ""
            echo "âœ“ Spritely Hoot successfully installed"
            guild compile-wasm --version 2>&1 | head -n 1 || echo "guild compile-wasm is available"
            return 0
        else
            echo ""
            echo "âš ï¸  Warning: Hoot installation completed but guild compile-wasm not available"
            echo "   This may be due to PATH issues. Try running:"
            echo "   export PATH=\"\$PATH:/usr/local/bin\""
            echo "   Or check if Hoot needs additional configuration"
            return 0
        fi
    else
        echo ""
        echo "âŒ Error: All installation methods failed"
        echo "   Please install Hoot manually from https://codeberg.org/spritely/hoot"
        return 1
    fi
}

# Main installation logic
main() {
    echo "Step 1: Installing Guile Scheme"
    echo "--------------------------------"
    echo ""

    # Check if Guile is already installed with correct version
    if version=$(check_guile_version); then
        echo "âœ“ Guile Scheme installed (version $version)"
        echo ""

        # Check if this version is compatible with Hoot
        if ! check_hoot_compatible_guile; then
            echo "âš ï¸  WARNING: Guile $version is NOT sufficient for Hoot"
            echo "   Hoot requires Guile 3.0.11+ or development version from Git"
            echo "   Current version $version is missing features like primcall-raw-representations"
            echo ""
            echo "   Choose upgrade method:"
            echo "   1) Install Guile development version from Git (recommended, 10-30 min)"
            echo "   2) Skip and continue with current version (Hoot will likely fail)"
            echo ""
            read -p "Enter choice [1/2] (default: 1): " upgrade_choice
            upgrade_choice=${upgrade_choice:-1}

            if [ "$upgrade_choice" = "1" ]; then
                echo ""
                echo "Upgrading Guile to development version..."
                echo ""

                # Try Guix first
                if command_exists guix; then
                    if install_guile_guix; then
                        version=$(check_guile_version)
                        echo "âœ“ Guile upgraded to version $version"
                    else
                        # Fall back to source
                        if ! install_guile_from_source; then
                            echo "âŒ Error: Failed to upgrade Guile"
                            exit 1
                        fi
                        version=$(check_guile_version)
                    fi
                else
                    # No Guix, use source
                    if ! install_guile_from_source; then
                        echo "âŒ Error: Failed to upgrade Guile"
                        exit 1
                    fi
                    version=$(check_guile_version)
                fi

                echo ""
                echo "âœ“ Guile successfully upgraded"
                guile --version | head -n 1
                echo ""
            else
                echo ""
                echo "âš ï¸  Continuing with Guile $version (Hoot installation will likely fail)"
                echo ""
            fi
        else
            echo "âœ“ Guile version $version is compatible with Hoot"
            guile --version | head -n 1
            echo ""
        fi
    else
        # Guile needs to be installed or upgraded
        if command_exists guile; then
            local current_version=$(guile --version | head -n 1 | grep -oP '\d+\.\d+' | head -n 1)
            echo "âš ï¸  Warning: Guile $current_version is installed but version 3.0+ is required"
            echo "  Attempting to upgrade..."
            echo ""
        else
            echo "Guile Scheme not found. Installing..."
            echo ""
        fi

        # Detect OS
        os=$(detect_os)
        echo "Detected OS: $os"
        echo ""

        case "$os" in
            linux)
                pkg_manager=$(detect_package_manager)
                if [ "$pkg_manager" = "unknown" ]; then
                    echo "âŒ Error: Could not detect package manager"
                    echo "   Please install Guile 3.0+ manually from https://www.gnu.org/software/guile/"
                    exit 1
                fi

                if ! install_guile_linux "$pkg_manager"; then
                    exit 1
                fi
                ;;

            macos)
                if ! install_guile_macos; then
                    exit 1
                fi
                ;;

            *)
                echo "âŒ Error: Unsupported operating system: $OSTYPE"
                echo "   This script supports Linux and macOS only"
                echo "   Please install Guile 3.0+ manually from https://www.gnu.org/software/guile/"
                exit 1
                ;;
        esac

        echo ""
        echo "Verifying installation..."

        # Verify Guile is now installed
        if ! command_exists guile; then
            echo "âŒ Error: Guile installation failed - guile command not found"
            echo "   Please check the installation logs above for errors"
            exit 1
        fi

        # Verify Guile version
        if version=$(check_guile_version); then
            echo "âœ“ Guile Scheme successfully installed (version $version)"
            echo ""
            guile --version | head -n 1
            echo ""
        else
            local installed_version=$(guile --version | head -n 1 | grep -oP '\d+\.\d+' | head -n 1)
            echo "âŒ Error: Guile $installed_version was installed but version 3.0+ is required"
            echo "   Please upgrade Guile manually or check your package manager"
            exit 1
        fi
    fi

    # Install guile-fibers (required by Goblins)
    local fibers_status="Installed"
    if ! install_fibers; then
        fibers_status="Not installed"
        echo ""
        echo "âš ï¸  Warning: guile-fibers installation failed"
        echo "   This is required by Goblins - Goblins installation will likely fail"
        echo ""
    fi

    # Now install Goblins (requires Guile and guile-fibers) - optional
    local goblins_status="Installed"
    if ! install_goblins; then
        goblins_status="Not installed (optional)"
        echo ""
        echo "âš ï¸  Note: Goblins installation was skipped or failed"
        echo "   This is optional - the core Guile environment is ready"
        echo "   Manual installation: https://codeberg.org/spritely/goblins"
        echo ""
    fi

    # Now install Hoot (requires Guile) - optional
    local hoot_status="Installed"
    if ! install_hoot; then
        hoot_status="Not installed (optional)"
        echo ""
        echo "âš ï¸  Note: Hoot installation was skipped or failed"
        echo "   This is optional - the core Guile environment is ready"
        echo "   Manual installation: https://codeberg.org/spritely/hoot"
        echo ""
    fi

    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "âœ… Installation Complete!"
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo ""
    echo "ğŸ“ Summary of installed components:"
    echo ""
    echo "  âœ“ GNU Guile: $(check_guile_version)"
    echo "  guile-fibers: $fibers_status"
    echo "  Spritely Goblins: $goblins_status"
    echo "  Spritely Hoot: $hoot_status"
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "ğŸ§ª Quick verification commands:"
    echo ""
    echo "Test Guile REPL:"
    echo "  guile"
    echo ""
    echo "Test guile-fibers:"
    echo "  guile -c '(use-modules (fibers))'"
    echo ""
    echo "Test Goblins:"
    echo "  guile -c '(use-modules (goblins))'"
    echo ""
    echo "Test Hoot:"
    echo "  guild compile-wasm --version"
    echo ""
    echo "Compile Scheme to WASM (example):"
    echo "  echo '42' > /tmp/test.scm"
    echo "  guild compile-wasm --run /tmp/test.scm"
    echo ""
    echo "â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”â”"
    echo "ğŸš€ Spritely development environment ready!"
    echo ""
}

# Run main function
main
